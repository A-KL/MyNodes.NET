
@{
    ViewBag.Title = "Settings";
}

<h2>Settings</h2>

<div class="row">


    <div class="col-sm-6">
        <div class="panel panel-default">
            <div class="panel-heading">Serial gateway</div>
            <div class="panel-body">
                <div id="gateway-hardware-online">
                    <p class='text-success'>Loading data...</p>
                </div>

                <ul class="list-group small-margin">
                    <li class="list-group-item">
                        Nodes registered
                        <div class="pull-right" id="nodes-registered"></div>
                    </li>
                    <li class="list-group-item">
                        Sensors registered
                        <div class="pull-right" id="sensors-registered"></div>
                    </li>
                    <li class="list-group-item">
                        Stop writing history
                        <div class="pull-right pull-up-button">
                            <a class="btn btn-default" href="/GatewayApi/StopWritingHistory/">
                                Stop
                            </a>
                        </div>
                    </li>
                    <li class="list-group-item">
                        Delete all nodes
                        <div class="pull-right pull-up-button">
                            <button class="btn btn-default" data-href="/GatewayApi/DropNodes/" data-toggle="modal" data-target="#confirm-nodes-delete">
                                Delete
                            </button>
                        </div>
                    </li>
                </ul>

            </div>
        </div>
    </div>

    <div class="col-sm-6">
        <div class="panel panel-default">
            <div class="panel-heading">Links</div>
            <div class="panel-body">
                <ul class="list-group small-margin">
                    <li class="list-group-item">
                        Delete all sensors links
                        <div class="pull-right pull-up-button">
                            <button class="btn btn-default" data-href="/GatewayApi/DropLinks/" data-toggle="modal" data-target="#confirm-links-delete">
                                Delete
                            </button>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <div class="col-sm-6">
        <div class="panel panel-default">
            <div class="panel-heading">History</div>
            <div class="panel-body">
                <ul class="list-group small-margin">
                    <li class="list-group-item">
                        Delete all nodes history
                        <div class="pull-right pull-up-button">
                            <button class="btn btn-default" data-href="/GatewayApi/DropHistory/" data-toggle="modal" data-target="#confirm-history-delete">
                                Delete
                            </button>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </div>





    <div class="col-sm-6">
        <div class="panel panel-default">
            <div class="panel-heading">Web server</div>
            <div class="panel-body">
                <div id="webserver-info">
                    <ul class="list-group small-margin">
                        <li class="list-group-item">
                            Clients connected
                            <div class="pull-right" id="users-online">Unknown</div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <div class="col-sm-6">
        <div class="panel panel-default">
            <div class="panel-heading">Tasks</div>
            <div class="panel-body">
                <ul class="list-group small-margin">
                    <li class="list-group-item">
                        Disable all tasks
                        <div class="pull-right pull-up-button">
                            <a class="btn btn-default" href="/GatewayApi/DisableTasks/">
                                Disable
                            </a>
                        </div>
                    </li>
                    <li class="list-group-item">
                        Delete all tasks
                        <div class="pull-right pull-up-button">
                            <button class="btn btn-default" data-href="/GatewayApi/DropTasks/" data-toggle="modal" data-target="#confirm-tasks-delete">
                                Delete
                            </button>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </div>

</div>

<div class="modal fade" id="confirm-nodes-delete" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                Delete all nodes
            </div>
            <div class="modal-body">
                Deleting nodes from the database will release their ID.
                After that, you will need to turn on all
                previously registered nodes to reinitialize the database.
                If this is not done, any new node will take the ID
                of the other device, and there is a conflict! <br /><br />
                If there is a conflict, you should:
                1. Turn off all nodes.
                2. Delete all nodes from the database.
                3. Erase EEPROM on conflicty nodes and reflash again firmwares.
                4. Turn on all non-conflicting nodes.
                5. Turn on conflicty nodes. <br /><br />
                Again. After deleting nodes from the database,
                do not run the new nodes (which has not received the ID previously)
                before turn on all known nodes!
            </div>
            <div class="modal-footer">
                <a class="btn btn-danger btn-ok" href="/GatewayApi/DropNodes/">Delete</a>
                <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="confirm-history-delete" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                Delete all nodes history
            </div>
            <div class="modal-body">
                Are you sure you want to delete all nodes history?
            </div>
            <div class="modal-footer">
                <a class="btn btn-danger btn-ok" href="/GatewayApi/DropHistory/">Delete</a>
                <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="confirm-tasks-delete" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                Delete all nodes tasks
            </div>
            <div class="modal-body">
                Are you sure you want to delete all nodes tasks?
            </div>
            <div class="modal-footer">
                <a class="btn btn-danger btn-ok" href="/GatewayApi/DropTasks/">Delete</a>
                <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="confirm-links-delete" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                Delete all sensors links
            </div>
            <div class="modal-body">
                Are you sure you want to delete all sensors links?
            </div>
            <div class="modal-footer">
                <a class="btn btn-danger btn-ok" href="/GatewayApi/DropLinks/">Delete</a>
                <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
            </div>
        </div>
    </div>
</div>


@section scripts
{
    <script src="~/js/mysensors.js"></script>
    <script src="~/js/mynetsensors-settings-page.js"></script>
}