@{
    ViewBag.Title = "Config";
}

<br />
<div class="ui container">

    <h2>@ViewBag.Title</h2>

    <div>
        @*<a asp-controller="Config" asp-action="Gateway">Gateway</a> |
            <a asp-controller="Config" asp-action="SerialPort">Serial Port</a>*@
        <br />
    </div>
    <div class="ui divider"></div>

    <div class="ui two column centered stackable grid" id="main-content" style="display: none;">
        <div class="column">
            <div class="ui raised segments">
                <div class="ui secondary clearing segment">
                    <b>Serial Gateway</b>
                </div>

                @*<div class="ui attached clearing segment">
                    <div class="ui toggle checkbox">
                        <input type="checkbox" name="use-serial-gateway">
                        <label>Connect Serial Gateway</label>
                    </div>
                </div>*@


                @*<div class="ui attached clearing segment" id="gateway-hardware-online">
                    Gateway hardware is connected
                    <div class="ui right floated basic disabled button nonbutton">
                        <i class="big blue toggle on icon"></i>
                    </div>
                </div>
                <div class="ui attached clearing segment" id="gateway-hardware-offline">
                    Gateway hardware is disconnected
                    <div class="ui right floated basic disabled button nonbutton">
                        <i class="big red toggle off icon"></i>
                    </div>
                </div>*@

                <div class="ui attached clearing segment">
                    State
                    <div class="ui right floated basic disabled button nonbutton">
                        <span class="ui blue basic label" id="serial-gateway-state"></span>
                    </div>
                </div>

                <div class="ui attached clearing segment">
                    Nodes registered
                    <div class="ui right floated basic disabled button nonbutton">
                        <span class="ui blue basic label" id="nodes-registered">-</span>
                    </div>
                    <br />
                    <br />
                    Sensors registered
                    <div class="ui right floated basic disabled button nonbutton">
                        <span class="ui blue basic label" id="sensors-registered">-</span>
                    </div>
                    <br />
                    <br />
                    <div class="ui divider"></div>
                    <button class="ui right floated small button" id="serial-gateway-delete-nodes">Delete all nodes</button>
                </div>
    

                <div class="ui attached clearing segment" id="node-{{Id}}">
                    <div class="ui right floated buttons">
                        <a asp-controller="Config" asp-action="SerialPort" class="ui button">Select serial port</a>
                        <button class="ui blue button" id="serial-gateway-connect">Connect</button>
                        <button class="ui blue button" id="serial-gateway-disconnect" style="display: none">Disconnect</button>
                    </div>
                </div>
            </div>
        </div>


        @*<div class="column">
                <div class="ui raised segments">
                    <div class="ui secondary clearing segment">
                        <b>Tasks</b>
                    </div>
                    <div class="ui attached center aligned segment">
                        <button type="button" class="ui button" id="disableTasks">Disable all tasks</button>
                        <button class="ui button" id="dropTasks">Delete all tasks</button>
                    </div>
                </div>
            </div>*@


        @*<div class="column">
                <div class="ui raised segments">
                    <div class="ui secondary clearing segment">
                        <b>Web server</b>
                    </div>
                    <div class="ui attached clearing segment">
                        <div class="ui blue basic label" id="users-online">-</div>
                        Clients connected
                    </div>
                </div>
            </div>*@

    </div>


    <div class="ui modal" id="confirm-delete-nodes-dialog">
        <div class="header">
            Delete all nodes
        </div>
        <div class="image content">
            <div class="ui image">
                @*<i class="massive settings icon"></i>*@
                <i class="red massive warning sign icon"></i>
            </div>
            <div class="description">
                Deleting nodes from the database will release their ID.
                After that, you will need to turn on all
                previously registered nodes to reinitialize the database.
                If this is not done, any new node will take the ID
                of the other device, and there is a conflict! <br /><br />
                If there is a conflict, you should:<br />
                1. Turn off all nodes.<br />
                2. Delete all nodes from the database.<br />
                3. Erase EEPROM on conflicty nodes and reflash again firmwares.<br />
                4. Turn on all non-conflicting nodes.<br />
                5. Turn on conflicty nodes. <br /><br />
                Again. After deleting nodes from the database,
                do not run the new nodes (which has not received the ID previously)
                before turn on all known nodes!
            </div>
        </div>
        <div class="actions">
            <div class="ui cancel button">Cancel</div>
            <div class="ui red approve button">Delete</div>
        </div>
    </div>



    <div class="ui modal" id="confirm-delete-tasks-dialog">
        <div class="header">Delete all nodes tasks</div>
        <div class="image content">
            <div class="ui image">
                <i class="massive settings icon"></i>
            </div>
            <div class="description">
                Are you sure you want to delete all nodes tasks?
            </div>
        </div>
        <div class="actions">
            <div class="ui cancel button">Cancel</div>
            <div class="ui red approve button">Delete</div>
        </div>
    </div>

</div>

@section scripts
{
    <script src="~/js/mysensors.js"></script>
    <script src="~/js/mynetsensors-settings-page.js"></script>
}
